<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="./dist/main.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/topojson@3"></script>
    <script src="./dist/main.js"></script>

    <title>Shawna's JSP</title>



    <!-- <script defer src="main.js"></script> -->

  </head>

  <body>

    <div id="map"></div>
    <!-- <canvas id="tutorial" width="150" height="150"></canvas> -->
  </body>

  <script>
// Copyright 2021 Observable, Inc.
// Released under the ISC license.
// https://observablehq.com/@d3/choropleth
function Choropleth(data, {
  id = d => d.id, // given d in data, returns the feature id
  value = () => undefined, // given d in data, returns the quantitative value
  title, // given a feature f and possibly a datum d, returns the hover text
  format, // optional format specifier for the title
  scale = d3.scaleSequential, // type of color scale
  domain, // [min, max] values; input of color scale
  range = d3.interpolateBlues, // output of color scale
  width = 640, // outer width, in pixels
  height, // outer height, in pixels
  projection, // a D3 projection; null for pre-projected geometry
  features, // a GeoJSON feature collection
  featureId = d => d.id, // given a feature, returns its id
  borders, // a GeoJSON object for stroking borders
  outline = projection && projection.rotate ? {type: "Sphere"} : null, // a GeoJSON object for the background
  unknown = "#ccc", // fill color for missing data
  fill = "white", // fill color for outline
  stroke = "white", // stroke color for borders
  strokeLinecap = "round", // stroke line cap for borders
  strokeLinejoin = "round", // stroke line join for borders
  strokeWidth, // stroke width for borders
  strokeOpacity, // stroke opacity for borders
} = {}) {
  // Compute values.
  const N = d3.map(data, id);
  const V = d3.map(data, value).map(d => d == null ? NaN : +d);
  const Im = new d3.InternMap(N.map((id, i) => [id, i]));
  const If = d3.map(features.features, featureId);

  // Compute default domains.
  if (domain === undefined) domain = d3.extent(V);

  // Construct scales.
  const color = scale(domain, range);
  if (color.unknown && unknown !== undefined) color.unknown(unknown);

  // Compute titles.
  if (title === undefined) {
    format = color.tickFormat(100, format);
    title = (f, i) => `${f.properties.name}\n${format(V[i])}`;
  } else if (title !== null) {
    const T = title;
    const O = d3.map(data, d => d);
    title = (f, i) => T(f, O[i]);
  }

  // Compute the default height. If an outline object is specified, scale the projection to fit
  // the width, and then compute the corresponding height.
  if (height === undefined) {
    if (outline === undefined) {
      height = 400;
    } else {
      const [[x0, y0], [x1, y1]] = d3.geoPath(projection.fitWidth(width, outline)).bounds(outline);
      const dy = Math.ceil(y1 - y0), l = Math.min(Math.ceil(x1 - x0), dy);
      projection.scale(projection.scale() * (l - 1) / l).precision(0.2);
      height = dy;
    }
  }

  // Construct a path generator.
  const path = d3.geoPath(projection);

  const svg = d3.create("svg")
      .attr("width", width)
      .attr("height", height)
      .attr("viewBox", [0, 0, width, height])
      .attr("style", "width: 100%; height: auto; height: intrinsic;");

  if (outline != null) svg.append("path")
      .attr("fill", fill)
      .attr("stroke", "currentColor")
      .attr("d", path(outline));

  svg.append("g")
    .selectAll("path")
    .data(features.features)
    .join("path")
      .attr("fill", (d, i) => color(V[Im.get(If[i])]))
      .attr("d", path)
    .append("title")
      .text((d, i) => title(d, Im.get(If[i])));

  if (borders != null) svg.append("path")
      .attr("pointer-events", "none")
      .attr("fill", "none")
      .attr("stroke", stroke)
      .attr("stroke-linecap", strokeLinecap)
      .attr("stroke-linejoin", strokeLinejoin)
      .attr("stroke-width", strokeWidth)
      .attr("stroke-opacity", strokeOpacity)
      .attr("d", path(borders));

  return Object.assign(svg.node(), {scales: {color}});
}
  </script>

  <script>
    const hale = [{"name":"Afghanistan","hale":53},{"name":"Albania","hale":68.1},{"name":"Algeria","hale":65.5},{"name":"Andorra","hale":null},{"name":"Angola","hale":55.8},{"name":"Antigua and Barb.","hale":67},{"name":"Argentina","hale":68.4},{"name":"Armenia","hale":66.3},{"name":"Australia","hale":73},{"name":"Austria","hale":72.4},{"name":"Azerbaijan","hale":64.9},{"name":"Bahamas","hale":66.8},{"name":"Bahrain","hale":68.1},{"name":"Bangladesh","hale":63.3},{"name":"Barbados","hale":67},{"name":"Belarus","hale":65.5},{"name":"Belgium","hale":71.6},{"name":"Belize","hale":62.5},{"name":"Benin","hale":53.5},{"name":"Bhutan","hale":60.7},{"name":"Bolivia","hale":63},{"name":"Bosnia and Herz.","hale":67.2},{"name":"Botswana","hale":57.5},{"name":"Brazil","hale":66},{"name":"Brunei","hale":67.9},{"name":"Bulgaria","hale":66.4},{"name":"Burkina Faso","hale":52.9},{"name":"Burundi","hale":52.6},{"name":"Cabo Verde","hale":64.5},{"name":"Cambodia","hale":60.8},{"name":"Cameroon","hale":51.1},{"name":"Canada","hale":73.2},{"name":"Central African Rep.","hale":44.9},{"name":"Chad","hale":47.2},{"name":"Chile","hale":69.7},{"name":"China","hale":68.7},{"name":"Colombia","hale":67.1},{"name":"Comoros","hale":56.6},{"name":"Congo","hale":56.7},{"name":"Cook Is.","hale":null},{"name":"Costa Rica","hale":70.9},{"name":"Côte d'Ivoire","hale":48.3},{"name":"Croatia","hale":69},{"name":"Cuba","hale":69.9},{"name":"Cyprus","hale":73.3},{"name":"Czechia","hale":69.3},{"name":"North Korea","hale":64.6},{"name":"Dem. Rep. Congo","hale":52.5},{"name":"Denmark","hale":71.8},{"name":"Djibouti","hale":56.6},{"name":"Dominica","hale":null},{"name":"Dominican Rep.","hale":65.2},{"name":"Ecuador","hale":67.9},{"name":"Egypt","hale":61.1},{"name":"El Salvador","hale":65.5},{"name":"Eq. Guinea","hale":53.8},{"name":"Eritrea","hale":57.4},{"name":"Estonia","hale":68.2},{"name":"Ethiopia","hale":57.5},{"name":"Fiji","hale":61.3},{"name":"Finland","hale":71.7},{"name":"France","hale":73.4},{"name":"Gabon","hale":58.7},{"name":"Gambia","hale":54.4},{"name":"Georgia","hale":64.9},{"name":"Germany","hale":71.6},{"name":"Ghana","hale":56.4},{"name":"Greece","hale":72},{"name":"Grenada","hale":64.7},{"name":"Guatemala","hale":64.2},{"name":"Guinea","hale":52.2},{"name":"Guinea-Bissau","hale":51.7},{"name":"Guyana","hale":58.3},{"name":"Haiti","hale":55.3},{"name":"Honduras","hale":66.8},{"name":"Hungary","hale":66.8},{"name":"Iceland","hale":73},{"name":"India","hale":59.3},{"name":"Indonesia","hale":61.7},{"name":"Iran","hale":65.4},{"name":"Iraq","hale":59},{"name":"Ireland","hale":72.1},{"name":"Israel","hale":72.9},{"name":"Italy","hale":73.2},{"name":"Jamaica","hale":66.9},{"name":"Japan","hale":74.8},{"name":"Jordan","hale":66.4},{"name":"Kazakhstan","hale":63.4},{"name":"Kenya","hale":58.9},{"name":"Kiribati","hale":57.8},{"name":"Kuwait","hale":66.3},{"name":"Kyrgyzstan","hale":63.5},{"name":"Laos","hale":57.9},{"name":"Latvia","hale":66.2},{"name":"Lebanon","hale":66.1},{"name":"Lesotho","hale":46.6},{"name":"Liberia","hale":54.5},{"name":"Libya","hale":62.3},{"name":"Lithuania","hale":66.1},{"name":"Luxembourg","hale":72.6},{"name":"Madagascar","hale":58.3},{"name":"Malawi","hale":56.2},{"name":"Malaysia","hale":66.6},{"name":"Maldives","hale":69.8},{"name":"Mali","hale":50.7},{"name":"Malta","hale":72.2},{"name":"Marshall Is.","hale":null},{"name":"Mauritania","hale":56.4},{"name":"Mauritius","hale":65.8},{"name":"Mexico","hale":67.7},{"name":"Micronesia","hale":61.1},{"name":"Monaco","hale":null},{"name":"Mongolia","hale":61.9},{"name":"Montenegro","hale":68.1},{"name":"Morocco","hale":65.3},{"name":"Mozambique","hale":52.2},{"name":"Myanmar","hale":58.4},{"name":"Namibia","hale":55.9},{"name":"Nauru","hale":null},{"name":"Nepal","hale":61.3},{"name":"Netherlands","hale":72.1},{"name":"New Zealand","hale":72.8},{"name":"Nicaragua","hale":66.9},{"name":"Niger","hale":52.5},{"name":"Nigeria","hale":48.9},{"name":"Niue","hale":null},{"name":"Norway","hale":73},{"name":"Oman","hale":65.6},{"name":"Pakistan","hale":57.7},{"name":"Palau","hale":null},{"name":"Panama","hale":69.4},{"name":"Papua New Guinea","hale":58},{"name":"Paraguay","hale":65.3},{"name":"Peru","hale":67.5},{"name":"Philippines","hale":61.7},{"name":"Poland","hale":68.5},{"name":"Portugal","hale":72},{"name":"Qatar","hale":68.6},{"name":"South Korea","hale":73},{"name":"Moldova","hale":63.6},{"name":"Romania","hale":66.6},{"name":"Russia","hale":63.5},{"name":"Rwanda","hale":59.9},{"name":"St. Kitts and Nevis","hale":null},{"name":"Saint Lucia","hale":66.4},{"name":"St. Vin. and Gren.","hale":63.4},{"name":"Samoa","hale":66},{"name":"San Marino","hale":null},{"name":"São Tomé and Principe","hale":60.7},{"name":"Saudi Arabia","hale":65.7},{"name":"Senegal","hale":58.8},{"name":"Serbia","hale":67.4},{"name":"Seychelles","hale":65.7},{"name":"Sierra Leone","hale":47.6},{"name":"Singapore","hale":76.2},{"name":"Slovakia","hale":68.3},{"name":"Slovenia","hale":70.5},{"name":"Solomon Is.","hale":61.9},{"name":"Somalia","hale":50},{"name":"South Africa","hale":55.7},{"name":"S. Sudan","hale":50.6},{"name":"Spain","hale":73.8},{"name":"Sri Lanka","hale":66.8},{"name":"Sudan","hale":55.7},{"name":"Suriname","hale":63.2},{"name":"eSwatini","hale":50.2},{"name":"Sweden","hale":72.4},{"name":"Switzerland","hale":73.5},{"name":"Syria","hale":55.8},{"name":"Tajikistan","hale":63.5},{"name":"Thailand","hale":66.8},{"name":"Macedonia","hale":67.1},{"name":"Timor-Leste","hale":59.2},{"name":"Togo","hale":53.9},{"name":"Tonga","hale":64.3},{"name":"Trinidad and Tobago","hale":63.3},{"name":"Tunisia","hale":66.3},{"name":"Turkey","hale":66},{"name":"Turkmenistan","hale":61.4},{"name":"Tuvalu","hale":null},{"name":"Uganda","hale":54.9},{"name":"Ukraine","hale":64},{"name":"United Arab Emirates","hale":66.7},{"name":"United Kingdom","hale":71.9},{"name":"Tanzania","hale":56.5},{"name":"United States of America","hale":68.5},{"name":"Uruguay","hale":68.8},{"name":"Uzbekistan","hale":64.5},{"name":"Vanuatu","hale":62.7},{"name":"Venezuela","hale":66.1},{"name":"Vietnam","hale":67.5},{"name":"Yemen","hale":55.1},{"name":"Zambia","hale":54.3},{"name":"Zimbabwe","hale":54.4}];
    const chart = Choropleth(hale, {
      id: d => d.name, // country name, e.g. Zimbabwe
      value: d => d.hale, // health-adjusted life expectancy
      range: d3.interpolateYlGnBu,
      features: {
        type: "FeatureCollection",
        features: [
          {
            type: "Feature",
            id: "716",
            properties: {
              name: "Zimbabwe",
            },
            geometry: {
              type: "Polygon",
              coordinates: []
            }
          }
        ]
      },
      featureId: d => d.properties.name, // i.e., not ISO 3166-1 numeric
      // borders: countrymesh,
      projection: d3.geoEqualEarth(),
      width: 300,
    })
    document.body.appendChild(chart);
  </script>
</html>